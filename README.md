# Medical Cost Predictor
<b>Predicting medical costs by analyzing the impact of isolated variables</b><br>
<b>My first Python project!</b>

<h2>Introduction</h2>
<p><b>This project explores the relationship between individual factors and medical costs. By isolating and analyzing key variables of a large dataset, I built a predictive model to estimate healthcare expenses. This was a clean dataset of 1338 observations with 7 columns: age, sex, bmi, children, smoker, region, and charges</b></p>
<p>I'm particularly fond of this project since it marks the beginning of my coding career. I took this dataset from a data scientist module in codecademy. I was supposed to just create some summary data, but I decided I could do much more. What possessed me to do such a thing? Well, as my wife says, I love homework!</p>

<h2>Tools Used</h2>
<ul>
  <li>Jupyter Labs</li>
  <li>Python Pandas</li>
  <li>Python Scatter Plots</li>
  <li>Excel Charts</li>
</ul>

<h2>Methodology</h2>
I started with the assumption that the calculation could be described in simple mathematical terms. Each subsection will highlight how I analyzed each individual factor.

<h3>Body Mass Index (BMI)</h3>
<p>I chose to study BMI first since it was the only continuous variable; making control groups with discrete and categorical variables are much more exact than with continuous variables.</p>
<p>First, I grouped the data by the other 5 variables and made a count summary of each group to see which control group had the largest sample. This control group happenned to be 18 yr old females with no children who don't smoke and live in the northeast.</p>
<p>Next, I filtered my data to only show the people who fit that description. Then I made a scatter plot to compare BMI with medical charges. My scatter plot initially wasn't meaningful because of outliers. However, I could observe a perfectly linear relationship after removing them. So I measured the slope between two points and found that price increased by $1.39 for each 1 point increase in BMI. I confirmed this relationship by repeating this process with a second control group.</p>
<p>Finally, I reduced everyone's medical cost by their BMI times 1.39 to get everyone's charge if they had a BMI of zero. Since I observed some outliers, I wanted to remove them before moving on to the next variable. This was to make studying the next variable as clean as possible. I fixed this by assigning the mode value of adjusted charges of a control group to everyone in that control group.</p>

<h3>Sex and Region</h3>
<p>Just like before, I started by identifying a larger control group by grouping the data. This time, I group by one less variable since BMI was already "solved." Instead of making a scatter plot this time, I just filtered the data to show the adjusted prices between males and females in my control group. I could easily identify the mode adjusted charge value between both genders. So I calculated the difference between them. I found that females are charged $489 more than males. </p>
<p>I then reduced everyone's medical costs to show what it would be if everyone was male. Like before, I removed outliers by assigning everyone within a control group their mode value.</p>
<p>Region follow the exact same process as the sex variable. I identified that people in the south don't have additional charges. People in the northwest pay $383 more and people in the northeast may $583 more.</p>

<h3>Children and Age</h3>
<p>I analyzed the children variable in the same way I did with Body Mass Index. I mapped an exact linear relationship between children and cost on a scatterplot. Each additional child increases medical charges by $589.</p>
<p>However, when I mapped the relationship between age and cost on a scatterplot, I identified a non-linear relationship. It seemed to follow a y = mx^2 + b plot. At this point, the only outliers were smokers, so I filtered out the smokers from the dataset and exported the file to an Excel workbook where I quickly found the equation using a chart trendline. The equation generated by the trend line had extremely small values outside of the mx^2 values, so I removed them from the formula to simplify it. The result was added cost is equal 3.363 times age squared.</p>

<h3>Smoker Status</h3>
<p>The final variable to study was whether or not a person was a smoker, and I honestly had put this variable off because I knew it had the most variance. I did a final scatterplot where I compared the medical costs of smokers and non smokers. Interestingly enough, smokers seemed to fall under two main price tiers which suggests to me that there is another variable that wasn't provided by the dataset which could further explain medical cost. However, it has to be somewhat related to smoking since nonsmokers were completed explained by the previous variables (aside from outliers). Since I wasn't able to make a meaningful observation with smoker status, I didn't include that variable into my final formula.</p>

<h2>Results</h2>
<p>Here is the formula that can predict the medical charges applied to any non-smoking individual:</p>
<p>
def insurance_cost(age, bmi, children, region, sex): <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s_cost = (float(age ** 2) * 3.363) + (bmi * 1.39) + (children * 589.0) <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if region == 'northeast': <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s_cost += 583.0 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if region == 'northwest': <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s_cost += 383.0 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if sex == 'female': <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s_cost += 489.0 <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return s_cost <br>
</p>
<p>I found that this can perfectly predict the charges applied to most individuals in the dataset, this could be used to identify people who are over or undercharged.</p>
